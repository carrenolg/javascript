<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="../000-data/favicon.ico"
      type="image/x-icon"
    />
    <title>Async await JavaScript</title>
  </head>
  <body>
    <script>
      const powFunc = (range) => {
        let start = Date.now();
        let i = 0;
        while (i < range) {
          // console.log(i);
          i += 1;
          pow = Math.pow(i, 5);
          console.log(pow);
        }
        let end = Date.now();
        // console.log("duration:", end - start);
        return end - start;
      };

      const sqrtFunc = (range) => {
        let start = Date.now();
        let i = 0;
        while (i < range) {
          // console.log(i);
          i += 1;
          sqrt = Math.sqrt(i);
          console.log(Number.parseFloat(sqrt).toFixed(2));
        }
        let end = Date.now();
        // console.log("duration:", end - start);
        return end - start;
      };

      function call() {
        let start = Date.now();
        let t1 = powFunc(200);
        let t2 = sqrtFunc(200);
        console.log("duration t1", t1);
        console.log("duration t2", t2);
        let end = Date.now();
        console.log("duration NO async:", end - start);
        return end - start;
      }

      // async await
      const powPromise = async (range) => {
        let start = Date.now();
        let i = 0;
        while (i < range) {
          // console.log(i);
          i += 1;
          pow = Math.pow(i, 5);
          console.log(pow);
        }
        let end = Date.now();
        // console.log("duration:", end - start);
        return end - start;
      };

      const sqrtPromise = async (range) => {
        let start = Date.now();
        let i = 0;
        while (i < range) {
          // console.log(i);
          i += 1;
          sqrt = Math.sqrt(i);
          console.log(Number.parseFloat(sqrt).toFixed(2));
        }
        let end = Date.now();
        // console.log("duration:", end - start);
        return end - start;
      };

      async function asyncCall() {
        let start = Date.now();
        console.log("throw powPromise");
        let t1 = await powPromise(200);
        console.log("throw sqrtPromise");
        let t2 = await sqrtPromise(200);
        console.log("duration async t1", t1);
        console.log("duration async t2", t2);
        let end = Date.now();
        console.log(" async:", end - start);
        // console.log("duration async:", end - start);
      }

      /*let r = call();
      console.log("log", r);*/

      asyncCall();
      setTimeout(() => {
        console.log("computing... It is comeback");
      }, 3000);
      console.log("Estamos esperando que responda asyncCall!");

      //call();
    </script>
  </body>
</html>
